@model List<SupportU.Application.DTOs.EtiquetaDTO>
@{
    // Helper local para traducciones
    Func<string, string> t = key =>
    {
        var translations = ViewData["Translations"] as Dictionary<string, string>
            ?? new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase);
        return translations.TryGetValue(key, out var val) ? val : key;
    };

    ViewData["Title"] = t("Etiqueta_Index_Title") ?? "Etiquetas";
}

<section class="section mt-5 mt-lg-7 pt-4 pt-lg-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0">@t("Etiqueta_Management")</h2>
            <a asp-action="Create" class="btn btn-create" title="@t("Btn_NewEtiqueta")">
                <i class="bi bi-plus-circle"></i> @t("Btn_NewEtiqueta")
            </a>
        </div>

        @* Mensajes de notificación *@
        @if (TempData["Success"] != null)
        {
            <div class="alert alert-success alert-dismissible fade show mb-4" role="alert">
                <i class="bi bi-check-circle-fill"></i> @TempData["Success"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }

        @if (TempData["Error"] != null)
        {
            <div class="alert alert-danger alert-dismissible fade show mb-4" role="alert">
                <i class="bi bi-exclamation-triangle-fill"></i> @TempData["Error"]
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
        }

        @if (Model != null && Model.Any())
        {
            <div class="table-responsive shadow-sm rounded">
                <table class="table table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th>@t("Label_Nombre")</th>
                            <th class="text-center">@t("Label_Actions")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>@item.Nombre</td>
                                <td class="text-center">
                                    <a asp-action="Edit" asp-route-id="@item.EtiquetaId"
                                       class="btn btn-sm btn-edit" title="@t("Btn_Edit")">
                                        <i class="bi bi-pencil-square"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="alert alert-info">
                <i class="bi bi-info-circle"></i> @t("Etiqueta_NoRecords") ?? "No hay etiquetas registradas"
            </div>
        }
    </div>
</section>

@section Styles {
    <style>
        /* Estilos consistentes con la vista de categorías */
        .btn-create {
            background-color: #198754;
            color: white;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s;
        }

            .btn-create:hover {
                background-color: #157347;
                color: white;
            }

        .btn-edit {
            background-color: #ffc107;
            color: #212529;
            border: none;
            border-radius: 0.375rem;
            transition: background-color 0.2s;
        }

            .btn-edit:hover {
                background-color: #ffca2c;
                color: #212529;
            }

        .table th {
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
            border-bottom: 2px solid #dee2e6;
        }

        .section {
            background-color: #f8f9fa;
            min-height: calc(100vh - 76px);
        }

        .table-responsive {
            border-radius: 0.5rem;
            overflow: hidden;
            background-color: white;
        }
    </style>
}

@section Scripts {
    <script>
        // Auto-ocultar alertas después de 5 segundos (manteniendo tu función original)
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(function() {
                var alerts = document.querySelectorAll('.alert');
                alerts.forEach(function(alert) {
                    var bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                });
            }, 5000);
        });
    </script>
}