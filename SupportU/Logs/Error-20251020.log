2025-10-20 00:02:52.034 -06:00 [ERR] Failed executing DbCommand (208ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ticket_id], [t].[categoria_id], [t].[cumplimiento_resolucion], [t].[cumplimiento_respuesta], [t].[descripcion], [t].[estado], [t].[fecha_cierre], [t].[fecha_creacion], [t].[prioridad], [t].[tecnico_asignado_id], [t].[titulo], [t].[usuario_solicitante_id], [c].[categoria_id], [c].[activa], [c].[criterio_asignacion], [c].[descripcion], [c].[nombre], [c].[sla_id], [s].[sla_id], [s].[activo], [s].[nombre], [s].[tiempo_resolucion_minutos], [s].[tiempo_respuesta_minutos], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [e].[activa], [e].[categoria_id], [e].[nombre], [u].[activo], [u].[apellidos], [u].[email], [u].[fecha_creacion], [u].[nombre], [u].[password_hash], [u].[rol], [u].[ultimo_inicio_sesion], [t0].[calificacion_promedio], [t0].[carga_trabajo], [t0].[estado], [t0].[usuario_id], [u0].[activo], [u0].[apellidos], [u0].[email], [u0].[fecha_creacion], [u0].[nombre], [u0].[password_hash], [u0].[rol], [u0].[ultimo_inicio_sesion], [s0].[historial_id], [s0].[estado_anterior], [s0].[estado_nuevo], [s0].[fecha_cambio], [s0].[observaciones], [s0].[ticket_id], [s0].[usuario_id], [s0].[usuario_id0], [s0].[activo], [s0].[apellidos], [s0].[email], [s0].[fecha_creacion], [s0].[nombre], [s0].[password_hash], [s0].[rol], [s0].[ultimo_inicio_sesion], [s0].[imagen_id], [s0].[HistorialEstadoId], [s0].[nombre_archivo], [s0].[ruta_archivo], [s0].[ticket_id0], [i0].[imagen_id], [i0].[HistorialEstadoId], [i0].[nombre_archivo], [i0].[ruta_archivo], [i0].[ticket_id], [v].[comentario], [v].[fecha_valoracion], [v].[puntaje], [v].[ticket_id], [v].[usuario_id]
FROM [TICKET] AS [t]
INNER JOIN [CATEGORIA] AS [c] ON [t].[categoria_id] = [c].[categoria_id]
INNER JOIN [SLA] AS [s] ON [c].[sla_id] = [s].[sla_id]
INNER JOIN [USUARIO] AS [u] ON [t].[usuario_solicitante_id] = [u].[usuario_id]
LEFT JOIN [TECNICO] AS [t0] ON [t].[tecnico_asignado_id] = [t0].[tecnico_id]
LEFT JOIN [USUARIO] AS [u0] ON [t0].[usuario_id] = [u0].[usuario_id]
LEFT JOIN [VALORACION] AS [v] ON [t].[ticket_id] = [v].[ticket_id]
LEFT JOIN [ETIQUETA] AS [e] ON [c].[categoria_id] = [e].[categoria_id]
LEFT JOIN (
    SELECT [h].[historial_id], [h].[estado_anterior], [h].[estado_nuevo], [h].[fecha_cambio], [h].[observaciones], [h].[ticket_id], [h].[usuario_id], [u1].[usuario_id] AS [usuario_id0], [u1].[activo], [u1].[apellidos], [u1].[email], [u1].[fecha_creacion], [u1].[nombre], [u1].[password_hash], [u1].[rol], [u1].[ultimo_inicio_sesion], [i].[imagen_id], [i].[HistorialEstadoId], [i].[nombre_archivo], [i].[ruta_archivo], [i].[ticket_id] AS [ticket_id0]
    FROM [HISTORIAL_ESTADO] AS [h]
    INNER JOIN [USUARIO] AS [u1] ON [h].[usuario_id] = [u1].[usuario_id]
    LEFT JOIN [IMAGEN] AS [i] ON [h].[historial_id] = [i].[HistorialEstadoId]
) AS [s0] ON [t].[ticket_id] = [s0].[ticket_id]
LEFT JOIN [IMAGEN] AS [i0] ON [t].[ticket_id] = [i0].[ticket_id]
ORDER BY [t].[ticket_id], [c].[categoria_id], [s].[sla_id], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [s0].[historial_id], [s0].[usuario_id0], [s0].[imagen_id]
2025-10-20 00:02:52.375 -06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'SupportU.Infraestructure.Data.SupportUContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0fcc5883-a44f-4ad3-8f93-15c53ee60a64
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0fcc5883-a44f-4ad3-8f93-15c53ee60a64
Error Number:207,State:1,Class:16
2025-10-20 00:02:53.475 -06:00 [ERR] 
EventId    :3007-251020120253
ErrorList  :Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
StackTrace :   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at SupportU.Infraestructure.Repository.Implementations.RepositoryTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Infraestructure\Repository\Implementations\RepositoryTicket.cs:line 19
   at SupportU.Application.Services.Implementations.ServiceTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Application\Services\Implementations\ServiceTicket.cs:line 35
   at SupportU.Web.Controllers.TicketController.Index() in C:\Users\PC\source\repos\SupportU\SupportU\Controllers\TicketController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at SupportU.Web.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in C:\Users\PC\source\repos\SupportU\SupportU\Middleware\ErrorHandlingMiddleware.cs:line 22

2025-10-20 00:08:40.660 -06:00 [ERR] Failed executing DbCommand (123ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ticket_id], [t].[categoria_id], [t].[cumplimiento_resolucion], [t].[cumplimiento_respuesta], [t].[descripcion], [t].[estado], [t].[fecha_cierre], [t].[fecha_creacion], [t].[prioridad], [t].[tecnico_asignado_id], [t].[titulo], [t].[usuario_solicitante_id], [c].[categoria_id], [c].[activa], [c].[criterio_asignacion], [c].[descripcion], [c].[nombre], [c].[sla_id], [s].[sla_id], [s].[activo], [s].[nombre], [s].[tiempo_resolucion_minutos], [s].[tiempo_respuesta_minutos], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [e].[activa], [e].[categoria_id], [e].[nombre], [u].[activo], [u].[apellidos], [u].[email], [u].[fecha_creacion], [u].[nombre], [u].[password_hash], [u].[rol], [u].[ultimo_inicio_sesion], [t0].[calificacion_promedio], [t0].[carga_trabajo], [t0].[estado], [t0].[usuario_id], [u0].[activo], [u0].[apellidos], [u0].[email], [u0].[fecha_creacion], [u0].[nombre], [u0].[password_hash], [u0].[rol], [u0].[ultimo_inicio_sesion], [s0].[historial_id], [s0].[estado_anterior], [s0].[estado_nuevo], [s0].[fecha_cambio], [s0].[observaciones], [s0].[ticket_id], [s0].[usuario_id], [s0].[usuario_id0], [s0].[activo], [s0].[apellidos], [s0].[email], [s0].[fecha_creacion], [s0].[nombre], [s0].[password_hash], [s0].[rol], [s0].[ultimo_inicio_sesion], [s0].[imagen_id], [s0].[HistorialEstadoId], [s0].[nombre_archivo], [s0].[ruta_archivo], [s0].[ticket_id0], [i0].[imagen_id], [i0].[HistorialEstadoId], [i0].[nombre_archivo], [i0].[ruta_archivo], [i0].[ticket_id], [v].[comentario], [v].[fecha_valoracion], [v].[puntaje], [v].[ticket_id], [v].[usuario_id]
FROM [TICKET] AS [t]
INNER JOIN [CATEGORIA] AS [c] ON [t].[categoria_id] = [c].[categoria_id]
INNER JOIN [SLA] AS [s] ON [c].[sla_id] = [s].[sla_id]
INNER JOIN [USUARIO] AS [u] ON [t].[usuario_solicitante_id] = [u].[usuario_id]
LEFT JOIN [TECNICO] AS [t0] ON [t].[tecnico_asignado_id] = [t0].[tecnico_id]
LEFT JOIN [USUARIO] AS [u0] ON [t0].[usuario_id] = [u0].[usuario_id]
LEFT JOIN [VALORACION] AS [v] ON [t].[ticket_id] = [v].[ticket_id]
LEFT JOIN [ETIQUETA] AS [e] ON [c].[categoria_id] = [e].[categoria_id]
LEFT JOIN (
    SELECT [h].[historial_id], [h].[estado_anterior], [h].[estado_nuevo], [h].[fecha_cambio], [h].[observaciones], [h].[ticket_id], [h].[usuario_id], [u1].[usuario_id] AS [usuario_id0], [u1].[activo], [u1].[apellidos], [u1].[email], [u1].[fecha_creacion], [u1].[nombre], [u1].[password_hash], [u1].[rol], [u1].[ultimo_inicio_sesion], [i].[imagen_id], [i].[HistorialEstadoId], [i].[nombre_archivo], [i].[ruta_archivo], [i].[ticket_id] AS [ticket_id0]
    FROM [HISTORIAL_ESTADO] AS [h]
    INNER JOIN [USUARIO] AS [u1] ON [h].[usuario_id] = [u1].[usuario_id]
    LEFT JOIN [IMAGEN] AS [i] ON [h].[historial_id] = [i].[HistorialEstadoId]
) AS [s0] ON [t].[ticket_id] = [s0].[ticket_id]
LEFT JOIN [IMAGEN] AS [i0] ON [t].[ticket_id] = [i0].[ticket_id]
ORDER BY [t].[ticket_id], [c].[categoria_id], [s].[sla_id], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [s0].[historial_id], [s0].[usuario_id0], [s0].[imagen_id]
2025-10-20 00:08:41.045 -06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'SupportU.Infraestructure.Data.SupportUContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8ca0da10-0cea-4605-91fe-c0223ba63810
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8ca0da10-0cea-4605-91fe-c0223ba63810
Error Number:207,State:1,Class:16
2025-10-20 00:18:03.142 -06:00 [ERR] Failed executing DbCommand (178ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ticket_id], [t].[categoria_id], [t].[cumplimiento_resolucion], [t].[cumplimiento_respuesta], [t].[descripcion], [t].[estado], [t].[fecha_cierre], [t].[fecha_creacion], [t].[prioridad], [t].[tecnico_asignado_id], [t].[titulo], [t].[usuario_solicitante_id], [c].[categoria_id], [c].[activa], [c].[criterio_asignacion], [c].[descripcion], [c].[nombre], [c].[sla_id], [s].[sla_id], [s].[activo], [s].[nombre], [s].[tiempo_resolucion_minutos], [s].[tiempo_respuesta_minutos], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [e].[activa], [e].[categoria_id], [e].[nombre], [u].[activo], [u].[apellidos], [u].[email], [u].[fecha_creacion], [u].[nombre], [u].[password_hash], [u].[rol], [u].[ultimo_inicio_sesion], [t0].[calificacion_promedio], [t0].[carga_trabajo], [t0].[estado], [t0].[usuario_id], [u0].[activo], [u0].[apellidos], [u0].[email], [u0].[fecha_creacion], [u0].[nombre], [u0].[password_hash], [u0].[rol], [u0].[ultimo_inicio_sesion], [s0].[historial_id], [s0].[estado_anterior], [s0].[estado_nuevo], [s0].[fecha_cambio], [s0].[observaciones], [s0].[ticket_id], [s0].[usuario_id], [s0].[usuario_id0], [s0].[activo], [s0].[apellidos], [s0].[email], [s0].[fecha_creacion], [s0].[nombre], [s0].[password_hash], [s0].[rol], [s0].[ultimo_inicio_sesion], [s0].[imagen_id], [s0].[HistorialEstadoHistorialId], [s0].[nombre_archivo], [s0].[ruta_archivo], [s0].[ticket_id0], [i0].[imagen_id], [i0].[HistorialEstadoHistorialId], [i0].[nombre_archivo], [i0].[ruta_archivo], [i0].[ticket_id], [v].[comentario], [v].[fecha_valoracion], [v].[puntaje], [v].[ticket_id], [v].[usuario_id]
FROM [TICKET] AS [t]
INNER JOIN [CATEGORIA] AS [c] ON [t].[categoria_id] = [c].[categoria_id]
INNER JOIN [SLA] AS [s] ON [c].[sla_id] = [s].[sla_id]
INNER JOIN [USUARIO] AS [u] ON [t].[usuario_solicitante_id] = [u].[usuario_id]
LEFT JOIN [TECNICO] AS [t0] ON [t].[tecnico_asignado_id] = [t0].[tecnico_id]
LEFT JOIN [USUARIO] AS [u0] ON [t0].[usuario_id] = [u0].[usuario_id]
LEFT JOIN [VALORACION] AS [v] ON [t].[ticket_id] = [v].[ticket_id]
LEFT JOIN [ETIQUETA] AS [e] ON [c].[categoria_id] = [e].[categoria_id]
LEFT JOIN (
    SELECT [h].[historial_id], [h].[estado_anterior], [h].[estado_nuevo], [h].[fecha_cambio], [h].[observaciones], [h].[ticket_id], [h].[usuario_id], [u1].[usuario_id] AS [usuario_id0], [u1].[activo], [u1].[apellidos], [u1].[email], [u1].[fecha_creacion], [u1].[nombre], [u1].[password_hash], [u1].[rol], [u1].[ultimo_inicio_sesion], [i].[imagen_id], [i].[HistorialEstadoHistorialId], [i].[nombre_archivo], [i].[ruta_archivo], [i].[ticket_id] AS [ticket_id0]
    FROM [HISTORIAL_ESTADO] AS [h]
    INNER JOIN [USUARIO] AS [u1] ON [h].[usuario_id] = [u1].[usuario_id]
    LEFT JOIN [IMAGEN] AS [i] ON [h].[historial_id] = [i].[HistorialEstadoHistorialId]
) AS [s0] ON [t].[ticket_id] = [s0].[ticket_id]
LEFT JOIN [IMAGEN] AS [i0] ON [t].[ticket_id] = [i0].[ticket_id]
ORDER BY [t].[ticket_id], [c].[categoria_id], [s].[sla_id], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [s0].[historial_id], [s0].[usuario_id0], [s0].[imagen_id]
2025-10-20 00:18:03.490 -06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'SupportU.Infraestructure.Data.SupportUContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoHistorialId'.
Invalid column name 'HistorialEstadoHistorialId'.
Invalid column name 'HistorialEstadoHistorialId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:4a3d7157-9871-4992-98f7-04c16c319f87
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoHistorialId'.
Invalid column name 'HistorialEstadoHistorialId'.
Invalid column name 'HistorialEstadoHistorialId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:4a3d7157-9871-4992-98f7-04c16c319f87
Error Number:207,State:1,Class:16
2025-10-20 00:18:04.641 -06:00 [ERR] 
EventId    :1977-251020121804
ErrorList  :Invalid column name 'HistorialEstadoHistorialId'.
Invalid column name 'HistorialEstadoHistorialId'.
Invalid column name 'HistorialEstadoHistorialId'.
StackTrace :   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at SupportU.Infraestructure.Repository.Implementations.RepositoryTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Infraestructure\Repository\Implementations\RepositoryTicket.cs:line 19
   at SupportU.Application.Services.Implementations.ServiceTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Application\Services\Implementations\ServiceTicket.cs:line 35
   at SupportU.Web.Controllers.TicketController.Index() in C:\Users\PC\source\repos\SupportU\SupportU\Controllers\TicketController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at SupportU.Web.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in C:\Users\PC\source\repos\SupportU\SupportU\Middleware\ErrorHandlingMiddleware.cs:line 22

2025-10-20 00:22:00.075 -06:00 [ERR] Failed executing DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ticket_id], [t].[categoria_id], [t].[cumplimiento_resolucion], [t].[cumplimiento_respuesta], [t].[descripcion], [t].[estado], [t].[fecha_cierre], [t].[fecha_creacion], [t].[prioridad], [t].[tecnico_asignado_id], [t].[titulo], [t].[usuario_solicitante_id], [c].[categoria_id], [c].[activa], [c].[criterio_asignacion], [c].[descripcion], [c].[nombre], [c].[sla_id], [s].[sla_id], [s].[activo], [s].[nombre], [s].[tiempo_resolucion_minutos], [s].[tiempo_respuesta_minutos], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [e].[activa], [e].[categoria_id], [e].[nombre], [u].[activo], [u].[apellidos], [u].[email], [u].[fecha_creacion], [u].[nombre], [u].[password_hash], [u].[rol], [u].[ultimo_inicio_sesion], [t0].[calificacion_promedio], [t0].[carga_trabajo], [t0].[estado], [t0].[usuario_id], [u0].[activo], [u0].[apellidos], [u0].[email], [u0].[fecha_creacion], [u0].[nombre], [u0].[password_hash], [u0].[rol], [u0].[ultimo_inicio_sesion], [s0].[historial_id], [s0].[estado_anterior], [s0].[estado_nuevo], [s0].[fecha_cambio], [s0].[observaciones], [s0].[ticket_id], [s0].[usuario_id], [s0].[usuario_id0], [s0].[activo], [s0].[apellidos], [s0].[email], [s0].[fecha_creacion], [s0].[nombre], [s0].[password_hash], [s0].[rol], [s0].[ultimo_inicio_sesion], [s0].[imagen_id], [s0].[HistorialEstadoId], [s0].[nombre_archivo], [s0].[ruta_archivo], [s0].[ticket_id0], [i0].[imagen_id], [i0].[HistorialEstadoId], [i0].[nombre_archivo], [i0].[ruta_archivo], [i0].[ticket_id], [v].[comentario], [v].[fecha_valoracion], [v].[puntaje], [v].[ticket_id], [v].[usuario_id]
FROM [TICKET] AS [t]
INNER JOIN [CATEGORIA] AS [c] ON [t].[categoria_id] = [c].[categoria_id]
INNER JOIN [SLA] AS [s] ON [c].[sla_id] = [s].[sla_id]
INNER JOIN [USUARIO] AS [u] ON [t].[usuario_solicitante_id] = [u].[usuario_id]
LEFT JOIN [TECNICO] AS [t0] ON [t].[tecnico_asignado_id] = [t0].[tecnico_id]
LEFT JOIN [USUARIO] AS [u0] ON [t0].[usuario_id] = [u0].[usuario_id]
LEFT JOIN [VALORACION] AS [v] ON [t].[ticket_id] = [v].[ticket_id]
LEFT JOIN [ETIQUETA] AS [e] ON [c].[categoria_id] = [e].[categoria_id]
LEFT JOIN (
    SELECT [h].[historial_id], [h].[estado_anterior], [h].[estado_nuevo], [h].[fecha_cambio], [h].[observaciones], [h].[ticket_id], [h].[usuario_id], [u1].[usuario_id] AS [usuario_id0], [u1].[activo], [u1].[apellidos], [u1].[email], [u1].[fecha_creacion], [u1].[nombre], [u1].[password_hash], [u1].[rol], [u1].[ultimo_inicio_sesion], [i].[imagen_id], [i].[HistorialEstadoId], [i].[nombre_archivo], [i].[ruta_archivo], [i].[ticket_id] AS [ticket_id0]
    FROM [HISTORIAL_ESTADO] AS [h]
    INNER JOIN [USUARIO] AS [u1] ON [h].[usuario_id] = [u1].[usuario_id]
    LEFT JOIN [IMAGEN] AS [i] ON [h].[historial_id] = [i].[HistorialEstadoId]
) AS [s0] ON [t].[ticket_id] = [s0].[ticket_id]
LEFT JOIN [IMAGEN] AS [i0] ON [t].[ticket_id] = [i0].[ticket_id]
ORDER BY [t].[ticket_id], [c].[categoria_id], [s].[sla_id], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [s0].[historial_id], [s0].[usuario_id0], [s0].[imagen_id]
2025-10-20 00:22:00.198 -06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'SupportU.Infraestructure.Data.SupportUContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e6be3a6f-6895-41a9-be91-877a62b7d2a6
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e6be3a6f-6895-41a9-be91-877a62b7d2a6
Error Number:207,State:1,Class:16
2025-10-20 00:22:00.617 -06:00 [ERR] 
EventId    :3399-251020122200
ErrorList  :Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
StackTrace :   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at SupportU.Infraestructure.Repository.Implementations.RepositoryTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Infraestructure\Repository\Implementations\RepositoryTicket.cs:line 19
   at SupportU.Application.Services.Implementations.ServiceTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Application\Services\Implementations\ServiceTicket.cs:line 35
   at SupportU.Web.Controllers.TicketController.Index() in C:\Users\PC\source\repos\SupportU\SupportU\Controllers\TicketController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at SupportU.Web.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in C:\Users\PC\source\repos\SupportU\SupportU\Middleware\ErrorHandlingMiddleware.cs:line 22

2025-10-20 00:23:08.457 -06:00 [ERR] Failed executing DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ticket_id], [t].[categoria_id], [t].[cumplimiento_resolucion], [t].[cumplimiento_respuesta], [t].[descripcion], [t].[estado], [t].[fecha_cierre], [t].[fecha_creacion], [t].[prioridad], [t].[tecnico_asignado_id], [t].[titulo], [t].[usuario_solicitante_id], [c].[categoria_id], [c].[activa], [c].[criterio_asignacion], [c].[descripcion], [c].[nombre], [c].[sla_id], [s].[sla_id], [s].[activo], [s].[nombre], [s].[tiempo_resolucion_minutos], [s].[tiempo_respuesta_minutos], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [e].[activa], [e].[categoria_id], [e].[nombre], [u].[activo], [u].[apellidos], [u].[email], [u].[fecha_creacion], [u].[nombre], [u].[password_hash], [u].[rol], [u].[ultimo_inicio_sesion], [t0].[calificacion_promedio], [t0].[carga_trabajo], [t0].[estado], [t0].[usuario_id], [u0].[activo], [u0].[apellidos], [u0].[email], [u0].[fecha_creacion], [u0].[nombre], [u0].[password_hash], [u0].[rol], [u0].[ultimo_inicio_sesion], [s0].[historial_id], [s0].[estado_anterior], [s0].[estado_nuevo], [s0].[fecha_cambio], [s0].[observaciones], [s0].[ticket_id], [s0].[usuario_id], [s0].[usuario_id0], [s0].[activo], [s0].[apellidos], [s0].[email], [s0].[fecha_creacion], [s0].[nombre], [s0].[password_hash], [s0].[rol], [s0].[ultimo_inicio_sesion], [s0].[imagen_id], [s0].[HistorialEstadoId], [s0].[nombre_archivo], [s0].[ruta_archivo], [s0].[ticket_id0], [i0].[imagen_id], [i0].[HistorialEstadoId], [i0].[nombre_archivo], [i0].[ruta_archivo], [i0].[ticket_id], [v].[comentario], [v].[fecha_valoracion], [v].[puntaje], [v].[ticket_id], [v].[usuario_id]
FROM [TICKET] AS [t]
INNER JOIN [CATEGORIA] AS [c] ON [t].[categoria_id] = [c].[categoria_id]
INNER JOIN [SLA] AS [s] ON [c].[sla_id] = [s].[sla_id]
INNER JOIN [USUARIO] AS [u] ON [t].[usuario_solicitante_id] = [u].[usuario_id]
LEFT JOIN [TECNICO] AS [t0] ON [t].[tecnico_asignado_id] = [t0].[tecnico_id]
LEFT JOIN [USUARIO] AS [u0] ON [t0].[usuario_id] = [u0].[usuario_id]
LEFT JOIN [VALORACION] AS [v] ON [t].[ticket_id] = [v].[ticket_id]
LEFT JOIN [ETIQUETA] AS [e] ON [c].[categoria_id] = [e].[categoria_id]
LEFT JOIN (
    SELECT [h].[historial_id], [h].[estado_anterior], [h].[estado_nuevo], [h].[fecha_cambio], [h].[observaciones], [h].[ticket_id], [h].[usuario_id], [u1].[usuario_id] AS [usuario_id0], [u1].[activo], [u1].[apellidos], [u1].[email], [u1].[fecha_creacion], [u1].[nombre], [u1].[password_hash], [u1].[rol], [u1].[ultimo_inicio_sesion], [i].[imagen_id], [i].[HistorialEstadoId], [i].[nombre_archivo], [i].[ruta_archivo], [i].[ticket_id] AS [ticket_id0]
    FROM [HISTORIAL_ESTADO] AS [h]
    INNER JOIN [USUARIO] AS [u1] ON [h].[usuario_id] = [u1].[usuario_id]
    LEFT JOIN [IMAGEN] AS [i] ON [h].[historial_id] = [i].[HistorialEstadoId]
) AS [s0] ON [t].[ticket_id] = [s0].[ticket_id]
LEFT JOIN [IMAGEN] AS [i0] ON [t].[ticket_id] = [i0].[ticket_id]
ORDER BY [t].[ticket_id], [c].[categoria_id], [s].[sla_id], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [s0].[historial_id], [s0].[usuario_id0], [s0].[imagen_id]
2025-10-20 00:23:08.565 -06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'SupportU.Infraestructure.Data.SupportUContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0b33a1a6-eda3-4ac3-95fc-25f2d035f43f
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0b33a1a6-eda3-4ac3-95fc-25f2d035f43f
Error Number:207,State:1,Class:16
2025-10-20 00:36:16.570 -06:00 [ERR] Failed executing DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[ticket_id], [t].[categoria_id], [t].[cumplimiento_resolucion], [t].[cumplimiento_respuesta], [t].[descripcion], [t].[estado], [t].[fecha_cierre], [t].[fecha_creacion], [t].[prioridad], [t].[tecnico_asignado_id], [t].[titulo], [t].[usuario_solicitante_id], [c].[categoria_id], [c].[activa], [c].[criterio_asignacion], [c].[descripcion], [c].[nombre], [c].[sla_id], [s].[sla_id], [s].[activo], [s].[nombre], [s].[tiempo_resolucion_minutos], [s].[tiempo_respuesta_minutos], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [e].[activa], [e].[categoria_id], [e].[nombre], [u].[activo], [u].[apellidos], [u].[email], [u].[fecha_creacion], [u].[nombre], [u].[password_hash], [u].[rol], [u].[ultimo_inicio_sesion], [t0].[calificacion_promedio], [t0].[carga_trabajo], [t0].[estado], [t0].[usuario_id], [u0].[activo], [u0].[apellidos], [u0].[email], [u0].[fecha_creacion], [u0].[nombre], [u0].[password_hash], [u0].[rol], [u0].[ultimo_inicio_sesion], [s0].[historial_id], [s0].[estado_anterior], [s0].[estado_nuevo], [s0].[fecha_cambio], [s0].[observaciones], [s0].[ticket_id], [s0].[usuario_id], [s0].[usuario_id0], [s0].[activo], [s0].[apellidos], [s0].[email], [s0].[fecha_creacion], [s0].[nombre], [s0].[password_hash], [s0].[rol], [s0].[ultimo_inicio_sesion], [s0].[imagen_id], [s0].[HistorialEstadoId], [s0].[nombre_archivo], [s0].[ruta_archivo], [s0].[ticket_id0], [i0].[imagen_id], [i0].[HistorialEstadoId], [i0].[nombre_archivo], [i0].[ruta_archivo], [i0].[ticket_id], [v].[comentario], [v].[fecha_valoracion], [v].[puntaje], [v].[ticket_id], [v].[usuario_id]
FROM [TICKET] AS [t]
INNER JOIN [CATEGORIA] AS [c] ON [t].[categoria_id] = [c].[categoria_id]
INNER JOIN [SLA] AS [s] ON [c].[sla_id] = [s].[sla_id]
INNER JOIN [USUARIO] AS [u] ON [t].[usuario_solicitante_id] = [u].[usuario_id]
LEFT JOIN [TECNICO] AS [t0] ON [t].[tecnico_asignado_id] = [t0].[tecnico_id]
LEFT JOIN [USUARIO] AS [u0] ON [t0].[usuario_id] = [u0].[usuario_id]
LEFT JOIN [VALORACION] AS [v] ON [t].[ticket_id] = [v].[ticket_id]
LEFT JOIN [ETIQUETA] AS [e] ON [c].[categoria_id] = [e].[categoria_id]
LEFT JOIN (
    SELECT [h].[historial_id], [h].[estado_anterior], [h].[estado_nuevo], [h].[fecha_cambio], [h].[observaciones], [h].[ticket_id], [h].[usuario_id], [u1].[usuario_id] AS [usuario_id0], [u1].[activo], [u1].[apellidos], [u1].[email], [u1].[fecha_creacion], [u1].[nombre], [u1].[password_hash], [u1].[rol], [u1].[ultimo_inicio_sesion], [i].[imagen_id], [i].[HistorialEstadoId], [i].[nombre_archivo], [i].[ruta_archivo], [i].[ticket_id] AS [ticket_id0]
    FROM [HISTORIAL_ESTADO] AS [h]
    INNER JOIN [USUARIO] AS [u1] ON [h].[usuario_id] = [u1].[usuario_id]
    LEFT JOIN [IMAGEN] AS [i] ON [h].[historial_id] = [i].[HistorialEstadoId]
) AS [s0] ON [t].[ticket_id] = [s0].[ticket_id]
LEFT JOIN [IMAGEN] AS [i0] ON [t].[ticket_id] = [i0].[ticket_id]
ORDER BY [t].[ticket_id], [c].[categoria_id], [s].[sla_id], [u].[usuario_id], [t0].[tecnico_id], [u0].[usuario_id], [v].[valoracion_id], [e].[etiqueta_id], [s0].[historial_id], [s0].[usuario_id0], [s0].[imagen_id]
2025-10-20 00:36:16.677 -06:00 [ERR] An exception occurred while iterating over the results of a query for context type 'SupportU.Infraestructure.Data.SupportUContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9ded561c-95ed-45a6-ba44-37bfcbfdc8a1
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9ded561c-95ed-45a6-ba44-37bfcbfdc8a1
Error Number:207,State:1,Class:16
2025-10-20 00:36:16.987 -06:00 [ERR] 
EventId    :145-251020123616
ErrorList  :Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
Invalid column name 'HistorialEstadoId'.
StackTrace :   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at SupportU.Infraestructure.Repository.Implementations.RepositoryTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Infraestructure\Repository\Implementations\RepositoryTicket.cs:line 19
   at SupportU.Application.Services.Implementations.ServiceTicket.ListAsync() in C:\Users\PC\source\repos\SupportU\SupportU.Application\Services\Implementations\ServiceTicket.cs:line 35
   at SupportU.Web.Controllers.TicketController.Index() in C:\Users\PC\source\repos\SupportU\SupportU\Controllers\TicketController.cs:line 26
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at SupportU.Web.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in C:\Users\PC\source\repos\SupportU\SupportU\Middleware\ErrorHandlingMiddleware.cs:line 22

2025-10-20 13:23:51.041 -06:00 [ERR] 
EventId    :4670-251020012350
ErrorList  :The expression 'u.Rol' is invalid inside an 'Include' operation, since it does not represent a property access: 't => t.MyProperty'. To target navigations declared on derived types, use casting ('t => ((Derived)t).MyProperty') or the 'as' operator ('t => (t as Derived).MyProperty'). Collection navigation access can be filtered by composing Where, OrderBy(Descending), ThenBy(Descending), Skip or Take operations. For more information on including related data, see https://go.microsoft.com/fwlink/?LinkID=746393.
StackTrace :   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.PopulateIncludeTree(IncludeTreeNode includeTreeNode, Expression expression, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.ProcessInclude(NavigationExpansionExpression source, Expression expression, Boolean thenInclude, Boolean setLoaded)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.NavigationExpandingExpressionVisitor.Expand(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryTranslationPreprocessor.Process(Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at SupportU.Infraestructure.Repository.Implementations.RepositoryTicket.ListByUserAsync(Int32 usuarioId) in C:\Users\PC\source\repos\SupportU\SupportU.Infraestructure\Repository\Implementations\RepositoryTicket.cs:line 68
   at SupportU.Application.Services.Implementations.ServiceTicket.ListByUserAsync(Int32 usuarioId) in C:\Users\PC\source\repos\SupportU\SupportU.Application\Services\Implementations\ServiceTicket.cs:line 42
   at SupportU.Web.Controllers.TicketController.Index() in C:\Users\PC\source\repos\SupportU\SupportU\Controllers\TicketController.cs:line 25
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at SupportU.Web.Middleware.ErrorHandlingMiddleware.Invoke(HttpContext context) in C:\Users\PC\source\repos\SupportU\SupportU\Middleware\ErrorHandlingMiddleware.cs:line 22

